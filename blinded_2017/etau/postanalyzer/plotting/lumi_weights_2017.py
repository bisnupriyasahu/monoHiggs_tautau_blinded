

LOtoNNLO_DY = 5765.4/4954.0
LOtoNNLO_Wjets = 61526.7/50380
blinding_ratio = 1
sampleListDict = {
    'DY1JetsToLL_M-50_TuneCP5' : ['DY1JetsToLL', 'ZTT', '0'], 
    'DY2JetsToLL_M-50_TuneCP5' : ['DY2JetsToLL', 'ZTT', '0'], 
    'DY3JetsToLL_M-50_TuneCP5_ext1' : ['DY3JetsToLL', 'ZTT', '0'], 
    'DY3JetsToLL_M-50_TuneCP5_v1' : ['DY3JetsToLL', 'ZTT', '0'], 
    'DY4JetsToLL_M-50_TuneCP5' : ['DY4JetsToLL', 'ZTT', '0'], 
    'DYJetsToLL_M-10to50_TuneCP5' : ['DYJetsToLL', 'ZTT', '0'], 
    'DYJetsToLL_M-50_TuneCP5_ext1_v1' : ['DYJetsToLL', 'ZTT', '0'], 
    'DYJetsToLL_M-50_TuneCP5_v1' : ['DYJetsToLL', 'ZTT', '0'], 
    
    'DY1JetsToLL_M-50_TuneCP5_stitch' : ['ZTT1jet', 'ZTTjet', '0'],
    'DY2JetsToLL_M-50_TuneCP5_stitch' : ['ZTT2jet', 'ZTTjet', '0'],
    'DY3JetsToLL_M-50_TuneCP5_ext1_stitch' : ['ZTT3jet', 'ZTTjet', '0'],
    'DY3JetsToLL_M-50_TuneCP5_v1_stitch' : ['ZTT3jet', 'ZTTjet', '0'],
    'DY4JetsToLL_M-50_TuneCP5_stitch' : ['ZTT4jet', 'ZTTjet', '0'],
    'DYJetsToLL_M-50_TuneCP5_ext1_v1_stitch'  : ['ZTTjet_inc' , 'ZTTjet', '0'],
    'DYJetsToLL_M-50_TuneCP5_v1_stitch'  : ['ZTTjet_inc' , 'ZTTjet', '0'],

    'EWKWMinus2Jets_WToLNu_M-50_TuneCP5' : ['EWKWMinus2Jets', 'EWKWMinus', '0'], 
    'EWKWPlus2Jets_WToLNu_M-50_TuneCP5' : ['EWKWPlus2Jets', 'EWKWPlus', '0'], 
    'EWKZ2Jets_ZToLL_M-50_TuneCP5' : ['EWKZ2Jets_ZToLL', 'EWKZ2Jets', '0'], 
    'EWKZ2Jets_ZToNuNu_TuneCP5' : ['EWKZ2Jets_ZToNuNu', 'EWKZ2Jets', '0'], 
    'GluGluHToTauTau_M125' : ['GluGluHToTauTau', 'GluGluH', '0'], 
    'GluGluHToWWTo2L2Nu_M125' : ['GluGluHToWWTo2L2Nu', 'GluGluH', '0'], 
    'ST_t-channel_antitop_4f_inclusiveDecays_TuneCP5' : ['ST_t-channel_antitop', 'ST_t', '0'], 
    'ST_t-channel_top_4f_inclusiveDecays_TuneCP5' : ['ST_t-channel_top', 'ST_t', '0'], 
    'ST_tW_antitop_5f_inclusiveDecays_TuneCP5' : ['ST_tW_antitop', 'ST_t', '0'], 
    'ST_tW_top_5f_inclusiveDecays_TuneCP5' : ['ST_tW_top', 'ST_t', '0'], 
    
    'SingleElectron_EraB' : ['data_obs', 'data_obs', '0'], 
    'SingleElectron_EraC' : ['data_obs', 'data_obs', '0'], 
    'SingleElectron_EraD' : ['data_obs', 'data_obs', '0'], 
    'SingleElectron_EraE' : ['data_obs', 'data_obs', '0'], 
    'SingleElectron_EraF' : ['data_obs', 'data_obs', '0'], 
    
    'SingleMuon_EraB' : ['data_obs', 'data_obs', '0'], 
    'SingleMuon_EraC' : ['data_obs', 'data_obs', '0'], 
    'SingleMuon_EraD' : ['data_obs', 'data_obs', '0'], 
    'SingleMuon_EraE' : ['data_obs', 'data_obs', '0'], 
    'SingleMuon_EraF' : ['data_obs', 'data_obs', '0'], 
    
    'TTTo2L2Nu_TuneCP5' : ['TTTo2L2Nu', 'TT', '0'], 
    'TTToHadronic_TuneCP5' : ['TTToHadronic', 'TT', '0'], 
    'TTToSemiLeptonic_TuneCP5' : ['TTToSemiLeptonic', 'TT', '0'], 
    'VBFHToTauTau_M125' : ['VBFHToTauTau', 'VBFH', '0'], 
    'VBFHToWWTo2L2Nu_M125' : ['VBFHToWWTo2L2Nu', 'VBFH', '0'], 
    'VVTo2L2Nu' : ['VVTo2L2Nu', 'VV', '0'], 
    'W1JetsToLNu_TuneCP5' : ['W1JetsToLNu', 'WJets', '0'], 
    'W2JetsToLNu_TuneCP5' : ['W2JetsToLNu', 'WJets', '0'], 
    'W3JetsToLNu_TuneCP5' : ['W3JetsToLNu', 'WJets', '0'], 
    'W4JetsToLNu_TuneCP5' : ['W4JetsToLNu', 'WJets', '0'], 
    'WJetsToLNu_TuneCP5' : ['WJetsToLNu', 'WJets', '0'], 
    
    'W1JetsToLNu_TuneCP5_stitch' : ['W1Jet', 'WJets_jets', '0'],
    'W2JetsToLNu_TuneCP5_stitch' : ['W2Jet', 'WJets_jets', '0'],
    'W3JetsToLNu_TuneCP5_stitch' : ['W3Jet', 'WJets_jets', '0'],
    'W4JetsToLNu_TuneCP5_stitch' : ['W4Jet', 'WJets_jets', '0'],
    'WJetsToLNu_TuneCP5_stitch'  : ['WJets_inc' , 'WJets_jets', '0'],
    
    'WWTo1L1Nu2Q' : ['WWTo1L1Nu2Q', 'VV', '0'], 
    'WWToLNuQQ_NNPDF31_TuneCP5' : ['WWToLNuQQ', 'VV', '0'], 
    'WWW_4F_TuneCP5' : ['WWW', 'VVV', '0'], 
    'WWZ_4F_TuneCP5' : ['WWZ', 'VVV', '0'], 
    'WW_TuneCP5' : ['WW', 'VV', '0'], 
    'WZTo3LNu_TuneCP5' : ['WZTo3LNu', 'VV', '0'], 
    'WZZ_TuneCP5' : ['WZZ', 'VVV', '0'], 
    'WZ_TuneCP5' : ['WZ', 'VV', '0'], 
    'WminusHToTauTau_M125' : ['WminusHToTauTau', 'WminusH', '0'], 
    'WplusHToTauTau_M125' : ['WplusHToTauTau', 'WplusH', '0'], 
    'ZHToTauTau_M125' : ['ZHToTauTau', 'ZH', '0'], 
    'ZJetsToNuNu_HT-100To200' : ['ZJetsToNuNu_HT100-200', 'ZJetsToNuNu', '0'], 
    'ZJetsToNuNu_HT-1200To2500' : ['ZJetsToNuNu_HT1200-2500', 'ZJetsToNuNu', '0'], 
    'ZJetsToNuNu_HT-200To400' : ['ZJetsToNuNu_HT200-400', 'ZJetsToNuNu', '0'], 
    'ZJetsToNuNu_HT-2500ToInf' : ['ZJetsToNuNu_HT2500-Inf', 'ZJetsToNuNu', '0'], 
    'ZJetsToNuNu_HT-400To600' : ['ZJetsToNuNu_HT400-600', 'ZJetsToNuNu', '0'], 
    'ZJetsToNuNu_HT-600To800' : ['ZJetsToNuNu_HT600-800', 'ZJetsToNuNu', '0'], 
    'ZJetsToNuNu_HT-800To1200' : ['ZJetsToNuNu_HT800-1200', 'ZJetsToNuNu', '0'], 
    'ZZTo2L2Q' : ['ZZTo2L2Q', 'VV', '0'], 
    'ZZTo4L_TuneCP5' : ['ZZTo4L', 'VV', '0'], 
    'ZZZ_TuneCP5' : ['ZZZ', 'VVV', '0'], 
    'ZZ_TuneCP5' : ['ZZ', 'VV', '0'], 
    'ggZH_HToTauTau_ZToLL_M125' : ['ggZH_HToTauTau_ZToLL', 'ggZH', '0'], 
    'ggZH_HToTauTau_ZToNuNu_M125' : ['ggZH_HToTauTau_ZToNuNu', 'ggZH', '0'], 
    'ttHToTauTau_M125_TuneCP5' : ['ttHToTauTau', 'ttH', '0'], 
    'MH3_200_MH4_100' : ['MH3_200_MH4_100' , 'signal_MH3_200_MH4_100' , '0' ],
    'MH3_200_MH4_150' : ['MH3_200_MH4_150' , 'signal_MH3_200_MH4_150' , '0' ],
    'MH3_300_MH4_100' : ['MH3_300_MH4_100' , 'signal_MH3_300_MH4_100' , '0' ],
    'MH3_300_MH4_150' : ['MH3_300_MH4_150' , 'signal_MH3_300_MH4_150' , '0' ],
    'MH3_400_MH4_100' : ['MH3_400_MH4_100' , 'signal_MH3_400_MH4_100' , '0' ],
    'MH3_400_MH4_150' : ['MH3_400_MH4_150' , 'signal_MH3_400_MH4_150' , '0' ],
    'MH3_400_MH4_200' : ['MH3_400_MH4_200' , 'signal_MH3_400_MH4_200' , '0' ],
    'MH3_400_MH4_250' : ['MH3_400_MH4_250' , 'signal_MH3_400_MH4_250' , '0' ],
    'MH3_500_MH4_150' : ['MH3_500_MH4_150' , 'signal_MH3_500_MH4_150' , '0' ],
    'MH3_500_MH4_200' : ['MH3_500_MH4_200' , 'signal_MH3_500_MH4_200' , '0' ],
    'MH3_500_MH4_250' : ['MH3_500_MH4_250' , 'signal_MH3_500_MH4_250' , '0' ],
    'MH3_500_MH4_300' : ['MH3_500_MH4_300' , 'signal_MH3_500_MH4_300' , '0' ],
    'MH3_600_MH4_100' : ['MH3_600_MH4_100' , 'signal_MH3_600_MH4_100' , '0' ],
    'MH3_600_MH4_150' : ['MH3_600_MH4_150' , 'signal_MH3_600_MH4_150' , '0' ],
    'MH3_600_MH4_200' : ['MH3_600_MH4_200' , 'signal_MH3_600_MH4_200' , '0' ],
    'MH3_600_MH4_250' : ['MH3_600_MH4_250' , 'signal_MH3_600_MH4_250' , '0' ],
    'MH3_600_MH4_300' : ['MH3_600_MH4_300' , 'signal_MH3_600_MH4_300' , '0' ],
    'MH3_600_MH4_350' : ['MH3_600_MH4_350' , 'signal_MH3_600_MH4_350' , '0' ],
    'MH3_600_MH4_400' : ['MH3_600_MH4_400' , 'signal_MH3_600_MH4_400' , '0' ],
    'MH3_600_MH4_500' : ['MH3_600_MH4_500' , 'signal_MH3_600_MH4_500' , '0' ],
    'MH3_700_MH4_250' : ['MH3_700_MH4_250' , 'signal_MH3_700_MH4_250' , '0' ],
    'MH3_700_MH4_300' : ['MH3_700_MH4_300' , 'signal_MH3_700_MH4_300' , '0' ],
    'MH3_700_MH4_350' : ['MH3_700_MH4_350' , 'signal_MH3_700_MH4_350' , '0' ],
    'MH3_700_MH4_400' : ['MH3_700_MH4_400' , 'signal_MH3_700_MH4_400' , '0' ],
    'MH3_800_MH4_250' : ['MH3_800_MH4_250' , 'signal_MH3_800_MH4_250' , '0' ],
    'MH3_800_MH4_300' : ['MH3_800_MH4_300' , 'signal_MH3_800_MH4_300' , '0' ],
    'MH3_800_MH4_350' : ['MH3_800_MH4_350' , 'signal_MH3_800_MH4_350' , '0' ],
    'MH3_800_MH4_500' : ['MH3_800_MH4_500' , 'signal_MH3_800_MH4_500' , '0' ],
    'MH3_900_MH4_300' : ['MH3_900_MH4_300' , 'signal_MH3_900_MH4_300' , '0' ],
    'MH3_900_MH4_350' : ['MH3_900_MH4_350' , 'signal_MH3_900_MH4_350' , '0' ],
    'MH3_900_MH4_400' : ['MH3_900_MH4_400' , 'signal_MH3_900_MH4_400' , '0' ],
    'MH3_900_MH4_500' : ['MH3_900_MH4_500' , 'signal_MH3_900_MH4_500' , '0' ]
    
}

xsex_mapping = {
    'ZL' : 5765.4 , 
    'ZTT' : 5765.4 , 
    'ZJ' : 5765.4 , 
    'ZLL' : 5765.4 , 
    'DY_LO' : LOtoNNLO_DY*4954.0 , 
    'DYJetsToLL' : LOtoNNLO_DY*4954.0 , 
    'DY1JetsToLL' : LOtoNNLO_DY*1012.5 , 
    'DY2JetsToLL' : LOtoNNLO_DY*332.8 , 
    'DY3JetsToLL' : LOtoNNLO_DY*101.8 , 
    'DY4JetsToLL' : LOtoNNLO_DY*54.8 , 
    'TTJets' : 831.76 , 
    'TTTo2L2Nu' : 88.29 , 
    'TTToHadronic' : 377.96 , 
    'TTToSemiLeptonic' : 365.35 , 
    'ZTTjet_inc' : 2.447677534/blinding_ratio , 
    'ZTT1jet' : 0.785055866/blinding_ratio , 
    'ZTT2jet' : 0.968954563/blinding_ratio , 
    'ZTT3jet' : 0.552080344/blinding_ratio , 
    'ZTT4jet' : 0.48914453/blinding_ratio , 
    'WJetsToLNu_inc' : LOtoNNLO_Wjets*50380.0 , 
    'WJetsToLNu' : LOtoNNLO_Wjets*50380.0 , 
    'W1JetsToLNu' : LOtoNNLO_Wjets*9644.5 , 
    'W2JetsToLNu' : LOtoNNLO_Wjets*3144.5 , 
    'W3JetsToLNu' : LOtoNNLO_Wjets*964.8 , 
    'W4JetsToLNu' : LOtoNNLO_Wjets*485.6 , 
    
    'WJets_inc' : 57.29217/blinding_ratio , 
    'W1Jet' : 7.715/blinding_ratio , 
    'W2Jet' : 17.0511/blinding_ratio , 
    'W3Jet' : 2.357/blinding_ratio , 
    'W4Jet' : 2.1368/blinding_ratio ,

    'WJetsToLNu_2J' : LOtoNNLO_Wjets*50380 , 
    'WJetsToLNu_HT100-200' : LOtoNNLO_Wjets*1345.0 , 
    'WJetsToLNu_HT200-400' : LOtoNNLO_Wjets*359.7 , 
    'WJetsToLNu_HT400-600' : LOtoNNLO_Wjets*48.91 , 
    'WJetsToLNu_HT600-800' : LOtoNNLO_Wjets*12.04 , 
    'WJetsToLNu_HT800-1200' : LOtoNNLO_Wjets*5.52 , 
    'WJetsToLNu_HT1200-2500' : LOtoNNLO_Wjets*1.33 , 
    'WJetsToLNu_HT2500-Inf' : LOtoNNLO_Wjets*0.0322 , 
    'GluGluHToTauTau' : 48.58*0.0627 , 
    'VBFHToTauTau' : 3.782*0.0627 , 
    'ZHToTauTau' : 0.7612*0.0627 , 
    'WplusH125' : 0.8400*0.0627 , 
    'WplusHToTauTau' : 0.8400*0.0627 , 
    'WminusH125' : 0.5328*0.0627 , 
    'WminusHToTauTau' : 0.5328*0.0627 , 
    'GluGluHToWWTo2L2Nu' : 1.154 , 
    'VBFHToWWTo2L2Nu' : 0.0897 , 
    'GluGluZH_HToWW' : 0.0262 , 
    'HWminusJ_HToWW' : 0.114 , 
    'HWplusJ_HToWW' : 0.180 , 
    'HZJ_HToWW' : 0.163 , 
    'WGToLNuG' : 464.4 , 
    'ggZH_HToTauTau_ZToLL' : 0.1227*0.0627*3*0.033658 , 
    'ggZH_HToTauTau_ZToNuNu' : 0.1227*0.0627*0.2000 , 
    'ggZH_HToTauTau_ZToQQ' : 0.1227*0.0627*0.6991 , 
    'ttHToNonbb' : 1.0 , 
    'QCD' : 720648000*0.00042 , 
    'data_obs' : 1.0 , 
    'ZJetsToNuNu_HT100-200' : 280.92 , 
    'ZJetsToNuNu_HT200-400' : 77.64 , 
    'ZJetsToNuNu_HT400-600' : 10.671 , 
    'ZJetsToNuNu_HT600-800' : 2.5611 , 
    'ZJetsToNuNu_HT800-1200' : 1.1778 , 
    'ZJetsToNuNu_HT1200-2500' : 0.2874 , 
    'ZJetsToNuNu_HT2500-Inf' : 0.006933 , 
    'WZTo1L3Nu' : 3.05 , 
    'WZTo1L1Nu2Q' : 10.71 , 
    'WZTo2L2Q' : 5.595 , 
    'WZTo3LNu' : 4.43 , 
    'WZ' : 4.43 ,
    'VVTo2L2Nu' : 13.84 , 
    'ST_tW_antitop' : 35.85 , 
    'ST_tW_top' : 35.85 , 
    'ST_t-channel_antitop' : 80.95 , 
    'ST_t-channel_top' : 136.02 , 
    'WWTo1L1Nu2Q' : 10.71 , 
    'WWToLNuQQ' : 10.71 , 
    'WWTo2L2Nu' : 12.178 , 
    'WW' : 12.178 ,
    'GluGluWWTo2L2Nu' : 0.59 , 
    'WWTo2L2Nu_DoubleScattering' : 1.62 , 
    'WpWpJJ_EWK_QCD' : 0.02615 , 
    'WpWpJJ_EWK' : 0.02615 , 
    'WpWpJJ_QCD' : 0.02615 , 
    'ZZTo2L2Q' : 3.22 , 
    'ZZTo2Q2Nu' : 4.03 , 
    'ZZTo4L' : 1.212 , 
    'ZZTo2L2Nu' : 0.564 , 
    'ZZ' :  0.564 ,
    'WWW' : 0.2086 , 
    'WWZ' : 0.1651 , 
    'WZZ' : 0.05565 , 
    'ZZZ' : 0.01398 , 
    'EWKWMinus' : 23.24 , 
    'EWKWMinus2Jets' : 23.24 , 
    'EWKWPlus' : 29.59 , 
    'EWKWPlus2Jets' : 29.59 , 
    'EWKZLL' : 4.321 , 
    'EWKZ2Jets_ZToLL' : 4.321 , 
    'EWKZLL_TT' : 4.321 , 
    'EWKZLL_J' : 4.321 , 
    'EWKZLL_L' : 4.321 , 
    'EWKZLL_LL' : 4.321 , 
    'EWKZNuNu' : 10.66 , 
    'EWKZ2Jets_ZToNuNu' : 10.66 , 
    'EWKZNuNu_TT' : 10.66 , 
    'EWKZNuNu_J' : 10.66 , 
    'EWKZNuNu_L' : 10.66 , 
    'EWKZNuNu_LL' : 10.66 , 
    'MH3_200_MH4_100' : 3.628e-01 , 
    'MH3_200_MH4_150' : 3.209e-01 , 
    'MH3_300_MH4_100' : 2.892e+00 , 
    'MH3_300_MH4_150' : 1.596e+00 , 
    'MH3_400_MH4_100' : 1.352e+00 , 
    'MH3_400_MH4_150' : 9.943e-01 , 
    'MH3_400_MH4_200' : 5.997e-01 , 
    'MH3_400_MH4_250' : 2.301e-01 , 
    'MH3_500_MH4_150' : 5.070e-01 , 
    'MH3_500_MH4_200' : 3.709e-01 , 
    'MH3_500_MH4_250' : 2.375e-01 , 
    'MH3_500_MH4_300' : 1.295e-01 , 
    'MH3_600_MH4_100' : 3.778e-01 , 
    'MH3_600_MH4_150' : 2.981e-01 , 
    'MH3_600_MH4_200' : 2.313e-01 , 
    'MH3_600_MH4_250' : 1.657e-01 , 
    'MH3_600_MH4_300' : 1.160e-01 , 
    'MH3_600_MH4_350' : 7.739e-02 , 
    'MH3_600_MH4_400' : 4.035e-02 , 
    'MH3_600_MH4_500' : 5.494e-03 , 
    'MH3_700_MH4_250' : 1.084e-01 , 
    'MH3_700_MH4_300' : 8.360e-02 , 
    'MH3_700_MH4_350' : 6.513e-02 , 
    'MH3_700_MH4_400' : 4.227e-02 , 
    'MH3_800_MH4_250' : 7.091e-02 , 
    'MH3_800_MH4_300' : 5.730e-02 , 
    'MH3_800_MH4_350' : 4.830e-02 , 
    'MH3_800_MH4_500' : 1.604e-02 , 
    'MH3_900_MH4_300' : 3.757e-02 , 
    'MH3_900_MH4_350' : 3.359e-02 , 
    'MH3_900_MH4_400' : 2.559e-02 , 
    'MH3_900_MH4_500' : 1.432e-02 
}

def get_lumiweight(sampleName="", ngen=1):
    """
    return weight=luminosity * crossSection / NumberOfGeneratedEvents
    
    """
    xs=1.0 
    weight=1.0
    luminosity=41520.0/blinding_ratio
    saveName = ""
    if sampleName+'_stitch' in sampleListDict:
        sample = sampleListDict[sampleName+'_stitch'][0]
        saveName = sampleListDict[sampleName+'_stitch'][1]
        weight = xsex_mapping[sample]
    else:
        sample = sampleListDict[sampleName][0]
        saveName = sampleListDict[sampleName][1]
        weight = luminosity * xsex_mapping[sample] / ngen
    if 'data' in saveName:
        weight = 1.0
    if 'MH3' in saveName:
        weight = weight * 0.06
    print "\n for "+sampleName+"  checking sample"+sample+ "  weight = "+str(weight)

    return weight , saveName

